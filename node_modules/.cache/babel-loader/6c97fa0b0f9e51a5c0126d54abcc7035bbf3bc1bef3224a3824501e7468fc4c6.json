{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createVNode as _createVNode, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"bg-white rounded-lg shadow\"\n};\nconst _hoisted_2 = {\n  class: \"p-6\"\n};\nconst _hoisted_3 = {\n  class: \"space-y-4\"\n};\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  class: \"flex items-start justify-between\"\n};\nconst _hoisted_6 = {\n  class: \"flex items-start flex-1\"\n};\nconst _hoisted_7 = {\n  class: \"flex-shrink-0 mt-1\"\n};\nconst _hoisted_8 = {\n  class: \"ml-3 flex-1\"\n};\nconst _hoisted_9 = {\n  class: \"text-lg font-medium text-gray-900 mb-2\"\n};\nconst _hoisted_10 = {\n  class: \"flex items-center text-sm text-gray-500 mb-2\"\n};\nconst _hoisted_11 = {\n  class: \"text-sm text-gray-600 line-clamp-2\"\n};\nconst _hoisted_12 = {\n  class: \"ml-4 flex-shrink-0\"\n};\nconst _hoisted_13 = {\n  class: \"border-t border-gray-200 px-6 py-4\"\n};\nconst _hoisted_14 = {\n  class: \"flex items-center justify-between\"\n};\nconst _hoisted_15 = {\n  class: \"text-sm text-gray-500\"\n};\nconst _hoisted_16 = {\n  class: \"flex items-center space-x-2\"\n};\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = {\n  class: \"flex space-x-1\"\n};\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.paginatedNotices, notice => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: notice.id,\n      class: \"border-b border-gray-200 pb-4 last:border-0 last:pb-0 cursor-pointer hover:bg-gray-50 rounded-md p-4 -mx-4\",\n      onClick: $event => $setup.openNoticeDetail(notice)\n    }, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", {\n      class: _normalizeClass(['h-3 w-3 rounded-full', notice.read ? 'bg-gray-300' : 'bg-blue-500'])\n    }, null, 2 /* CLASS */)]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"h3\", _hoisted_9, _toDisplayString(notice.title), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_10, [_createVNode($setup[\"Calendar\"], {\n      class: \"h-4 w-4 mr-1\"\n    }), _createElementVNode(\"span\", null, _toDisplayString(notice.time), 1 /* TEXT */), _createVNode($setup[\"User\"], {\n      class: \"h-4 w-4 ml-4 mr-1\"\n    }), _createElementVNode(\"span\", null, _toDisplayString(notice.author), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, _toDisplayString($setup.getNoticePreview(notice.content)), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_12, [_createVNode($setup[\"ChevronRight\"], {\n      class: \"h-5 w-5 text-gray-400\"\n    })])])], 8 /* PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createCommentVNode(\" 公告分页控件 \"), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, \" 共 \" + _toDisplayString($setup.allNotices.length) + \" 条公告，每页显示 \" + _toDisplayString($setup.noticesPerPage) + \" 条 \", 1 /* TEXT */), _createElementVNode(\"nav\", _hoisted_16, [_createElementVNode(\"button\", {\n    onClick: $setup.prevNoticePage,\n    disabled: $setup.currentNoticePage === 1,\n    class: \"px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\n  }, [_createVNode($setup[\"ChevronLeft\"], {\n    class: \"h-5 w-5\"\n  })], 8 /* PROPS */, _hoisted_17), _createElementVNode(\"div\", _hoisted_18, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.displayedNoticePageNumbers, page => {\n    return _openBlock(), _createElementBlock(\"button\", {\n      key: page,\n      onClick: $event => $setup.goToNoticePage(page),\n      class: _normalizeClass(['px-3 py-1 rounded-md', $setup.currentNoticePage === page ? 'bg-blue-600 text-white' : 'text-gray-600 hover:bg-gray-100'])\n    }, _toDisplayString(page), 11 /* TEXT, CLASS, PROPS */, _hoisted_19);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"button\", {\n    onClick: $setup.nextNoticePage,\n    disabled: $setup.currentNoticePage === $setup.totalNoticePages,\n    class: \"px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\n  }, [_createVNode($setup[\"ChevronRight\"], {\n    class: \"h-5 w-5\"\n  })], 8 /* PROPS */, _hoisted_20)])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","paginatedNotices","notice","key","id","onClick","$event","openNoticeDetail","_hoisted_5","_hoisted_6","_hoisted_7","_normalizeClass","read","_hoisted_8","_hoisted_9","_toDisplayString","title","_hoisted_10","_createVNode","time","author","_hoisted_11","getNoticePreview","content","_hoisted_12","_hoisted_4","_createCommentVNode","_hoisted_13","_hoisted_14","_hoisted_15","allNotices","length","noticesPerPage","_hoisted_16","prevNoticePage","disabled","currentNoticePage","_hoisted_17","_hoisted_18","displayedNoticePageNumbers","page","goToNoticePage","_hoisted_19","nextNoticePage","totalNoticePages","_hoisted_20"],"sources":["D:\\tax-centre\\tax-centre\\src\\components\\NoticePage.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg-white rounded-lg shadow\">\r\n    <div class=\"p-6\">\r\n      <div class=\"space-y-4\">\r\n        <div\r\n            v-for=\"(notice) in paginatedNotices\"\r\n            :key=\"notice.id\"\r\n            class=\"border-b border-gray-200 pb-4 last:border-0 last:pb-0 cursor-pointer hover:bg-gray-50 rounded-md p-4 -mx-4\"\r\n            @click=\"openNoticeDetail(notice)\"\r\n        >\r\n          <div class=\"flex items-start justify-between\">\r\n            <div class=\"flex items-start flex-1\">\r\n              <div class=\"flex-shrink-0 mt-1\">\r\n                <div :class=\"[\r\n                  'h-3 w-3 rounded-full',\r\n                  notice.read ? 'bg-gray-300' : 'bg-blue-500'\r\n                ]\"></div>\r\n              </div>\r\n              <div class=\"ml-3 flex-1\">\r\n                <h3 class=\"text-lg font-medium text-gray-900 mb-2\">{{ notice.title }}</h3>\r\n                <div class=\"flex items-center text-sm text-gray-500 mb-2\">\r\n                  <Calendar class=\"h-4 w-4 mr-1\" />\r\n                  <span>{{ notice.time }}</span>\r\n                  <User class=\"h-4 w-4 ml-4 mr-1\" />\r\n                  <span>{{ notice.author }}</span>\r\n                </div>\r\n                <div class=\"text-sm text-gray-600 line-clamp-2\">\r\n                  {{ getNoticePreview(notice.content) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"ml-4 flex-shrink-0\">\r\n              <ChevronRight class=\"h-5 w-5 text-gray-400\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 公告分页控件 -->\r\n    <div class=\"border-t border-gray-200 px-6 py-4\">\r\n      <div class=\"flex items-center justify-between\">\r\n        <div class=\"text-sm text-gray-500\">\r\n          共 {{ allNotices.length }} 条公告，每页显示 {{ noticesPerPage }} 条\r\n        </div>\r\n        <nav class=\"flex items-center space-x-2\">\r\n          <button\r\n              @click=\"prevNoticePage\"\r\n              :disabled=\"currentNoticePage === 1\"\r\n              class=\"px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronLeft class=\"h-5 w-5\" />\r\n          </button>\r\n\r\n          <div class=\"flex space-x-1\">\r\n            <button\r\n                v-for=\"page in displayedNoticePageNumbers\"\r\n                :key=\"page\"\r\n                @click=\"goToNoticePage(page)\"\r\n                :class=\"[\r\n                'px-3 py-1 rounded-md',\r\n                currentNoticePage === page\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'text-gray-600 hover:bg-gray-100'\r\n              ]\"\r\n            >\r\n              {{ page }}\r\n            </button>\r\n          </div>\r\n\r\n          <button\r\n              @click=\"nextNoticePage\"\r\n              :disabled=\"currentNoticePage === totalNoticePages\"\r\n              class=\"px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronRight class=\"h-5 w-5\" />\r\n          </button>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue';\r\nimport {\r\n  Calendar,\r\n  User,\r\n  ChevronRight,\r\n  ChevronLeft\r\n} from 'lucide-vue-next';\r\n\r\n// 所有公告数据\r\nconst allNotices = [\r\n  // 这里可以复制 TaxCenter.vue 中的 allNotices 数据\r\n  {\r\n    id: 5,\r\n    title: '关于优化纳税服务流程的实施方案',\r\n    time: '2025-04-20',\r\n    author: '纳税服务司',\r\n    read: false,\r\n    content: `<p>为进一步优化纳税服务流程，提升纳税人满意度，现制定本实施方案。</p>\r\n              <h4>一、指导思想</h4>\r\n              <p>以纳税人需求为导向，以数字化转型为驱动，全面优化纳税服务流程。</p>\r\n              <h4>二、主要措施</h4>\r\n              <p>1. 简化办税流程</p>\r\n              <p>2. 推广网上办税</p>\r\n              <p>3. 优化服务渠道</p>`,\r\n    attachments: []\r\n  },\r\n  {\r\n    id: 6,\r\n    title: '税务系统网络安全管理规定',\r\n    time: '2025-04-18',\r\n    author: '信息中心',\r\n    read: false,\r\n    content: `<p>为加强税务系统网络安全管理，保障信息系统安全稳定运行，特制定本规定。</p>\r\n              <h4>一、总则</h4>\r\n              <p>本规定适用于全国税务系统各级单位的网络安全管理工作。</p>\r\n              <h4>二、安全要求</h4>\r\n              <p>1. 建立健全网络安全管理制度</p>\r\n              <p>2. 加强网络安全技术防护</p>\r\n              <p>3. 定期开展安全检查和评估</p>`,\r\n    attachments: [\r\n      { name: '网络安全管理规定.pdf', url: '#', size: '2.5MB' }\r\n    ]\r\n  }\r\n];\r\n\r\n// 公告分页\r\nconst currentNoticePage = ref(1);\r\nconst noticesPerPage = 20;\r\n\r\nconst totalNoticePages = computed(() => {\r\n  return Math.ceil(allNotices.length / noticesPerPage);\r\n});\r\n\r\nconst paginatedNotices = computed(() => {\r\n  const startIndex = (currentNoticePage.value - 1) * noticesPerPage;\r\n  return allNotices.slice(startIndex, startIndex + noticesPerPage);\r\n});\r\n\r\nconst displayedNoticePageNumbers = computed(() => {\r\n  const maxVisiblePages = 5;\r\n  let startPage = Math.max(1, currentNoticePage.value - Math.floor(maxVisiblePages / 2));\r\n  let endPage = Math.min(totalNoticePages.value, startPage + maxVisiblePages - 1);\r\n\r\n  if (endPage - startPage + 1 < maxVisiblePages) {\r\n    startPage = Math.max(1, endPage - maxVisiblePages + 1);\r\n  }\r\n\r\n  const pages = [];\r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  return pages;\r\n});\r\n\r\nconst prevNoticePage = () => {\r\n  if (currentNoticePage.value > 1) {\r\n    currentNoticePage.value--;\r\n  }\r\n};\r\n\r\nconst nextNoticePage = () => {\r\n  if (currentNoticePage.value < totalNoticePages.value) {\r\n    currentNoticePage.value++;\r\n  }\r\n};\r\n\r\nconst goToNoticePage = (page) => {\r\n  currentNoticePage.value = page;\r\n};\r\n\r\n// 打开公告详情\r\nconst openNoticeDetail = (notice) => {\r\n  // 这里可以复用 TaxCenter.vue 中的 openNoticeDetail 逻辑\r\n  console.log('Open notice detail:', notice);\r\n};\r\n\r\n// 获取公告预览文本\r\nconst getNoticePreview = (content) => {\r\n  // 移除HTML标签并截取前100个字符\r\n  const text = content.replace(/<[^>]*>/g, '').replace(/&[^;]+;/g, ' ');\r\n  return text.length > 100 ? text.substring(0, 100) + '...' : text;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.prose p {\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.line-clamp-2 {\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}