{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed } from 'vue';\nimport { Calendar, User, ChevronRight, ChevronLeft } from 'lucide-vue-next';\n\n// 所有公告数据\nconst noticesPerPage = 20;\nexport default {\n  __name: 'NoticePage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const allNotices = [\n    // 这里可以复制 TaxCenter.vue 中的 allNotices 数据\n    {\n      id: 5,\n      title: '关于优化纳税服务流程的实施方案',\n      time: '2025-04-20',\n      author: '纳税服务司',\n      read: false,\n      content: `<p>为进一步优化纳税服务流程，提升纳税人满意度，现制定本实施方案。</p>\n              <h4>一、指导思想</h4>\n              <p>以纳税人需求为导向，以数字化转型为驱动，全面优化纳税服务流程。</p>\n              <h4>二、主要措施</h4>\n              <p>1. 简化办税流程</p>\n              <p>2. 推广网上办税</p>\n              <p>3. 优化服务渠道</p>`,\n      attachments: []\n    }, {\n      id: 6,\n      title: '税务系统网络安全管理规定',\n      time: '2025-04-18',\n      author: '信息中心',\n      read: false,\n      content: `<p>为加强税务系统网络安全管理，保障信息系统安全稳定运行，特制定本规定。</p>\n              <h4>一、总则</h4>\n              <p>本规定适用于全国税务系统各级单位的网络安全管理工作。</p>\n              <h4>二、安全要求</h4>\n              <p>1. 建立健全网络安全管理制度</p>\n              <p>2. 加强网络安全技术防护</p>\n              <p>3. 定期开展安全检查和评估</p>`,\n      attachments: [{\n        name: '网络安全管理规定.pdf',\n        url: '#',\n        size: '2.5MB'\n      }]\n    }];\n\n    // 公告分页\n    const currentNoticePage = ref(1);\n    const totalNoticePages = computed(() => {\n      return Math.ceil(allNotices.length / noticesPerPage);\n    });\n    const paginatedNotices = computed(() => {\n      const startIndex = (currentNoticePage.value - 1) * noticesPerPage;\n      return allNotices.slice(startIndex, startIndex + noticesPerPage);\n    });\n    const displayedNoticePageNumbers = computed(() => {\n      const maxVisiblePages = 5;\n      let startPage = Math.max(1, currentNoticePage.value - Math.floor(maxVisiblePages / 2));\n      let endPage = Math.min(totalNoticePages.value, startPage + maxVisiblePages - 1);\n      if (endPage - startPage + 1 < maxVisiblePages) {\n        startPage = Math.max(1, endPage - maxVisiblePages + 1);\n      }\n      const pages = [];\n      for (let i = startPage; i <= endPage; i++) {\n        pages.push(i);\n      }\n      return pages;\n    });\n    const prevNoticePage = () => {\n      if (currentNoticePage.value > 1) {\n        currentNoticePage.value--;\n      }\n    };\n    const nextNoticePage = () => {\n      if (currentNoticePage.value < totalNoticePages.value) {\n        currentNoticePage.value++;\n      }\n    };\n    const goToNoticePage = page => {\n      currentNoticePage.value = page;\n    };\n\n    // 打开公告详情\n    const openNoticeDetail = notice => {\n      // 这里可以复用 TaxCenter.vue 中的 openNoticeDetail 逻辑\n      console.log('Open notice detail:', notice);\n    };\n\n    // 获取公告预览文本\n    const getNoticePreview = content => {\n      // 移除HTML标签并截取前100个字符\n      const text = content.replace(/<[^>]*>/g, '').replace(/&[^;]+;/g, ' ');\n      return text.length > 100 ? text.substring(0, 100) + '...' : text;\n    };\n    const __returned__ = {\n      allNotices,\n      currentNoticePage,\n      noticesPerPage,\n      totalNoticePages,\n      paginatedNotices,\n      displayedNoticePageNumbers,\n      prevNoticePage,\n      nextNoticePage,\n      goToNoticePage,\n      openNoticeDetail,\n      getNoticePreview,\n      ref,\n      computed,\n      get Calendar() {\n        return Calendar;\n      },\n      get User() {\n        return User;\n      },\n      get ChevronRight() {\n        return ChevronRight;\n      },\n      get ChevronLeft() {\n        return ChevronLeft;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","Calendar","User","ChevronRight","ChevronLeft","noticesPerPage","allNotices","id","title","time","author","read","content","attachments","name","url","size","currentNoticePage","totalNoticePages","Math","ceil","length","paginatedNotices","startIndex","value","slice","displayedNoticePageNumbers","maxVisiblePages","startPage","max","floor","endPage","min","pages","i","push","prevNoticePage","nextNoticePage","goToNoticePage","page","openNoticeDetail","notice","console","log","getNoticePreview","text","replace","substring"],"sources":["D:/tax-centre/tax-centre/src/components/NoticePage.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg-white rounded-lg shadow\">\r\n    <div class=\"p-6\">\r\n      <div class=\"space-y-4\">\r\n        <div\r\n            v-for=\"(notice) in paginatedNotices\"\r\n            :key=\"notice.id\"\r\n            class=\"border-b border-gray-200 pb-4 last:border-0 last:pb-0 cursor-pointer hover:bg-gray-50 rounded-md p-4 -mx-4\"\r\n            @click=\"openNoticeDetail(notice)\"\r\n        >\r\n          <div class=\"flex items-start justify-between\">\r\n            <div class=\"flex items-start flex-1\">\r\n              <div class=\"flex-shrink-0 mt-1\">\r\n                <div :class=\"[\r\n                  'h-3 w-3 rounded-full',\r\n                  notice.read ? 'bg-gray-300' : 'bg-blue-500'\r\n                ]\"></div>\r\n              </div>\r\n              <div class=\"ml-3 flex-1\">\r\n                <h3 class=\"text-lg font-medium text-gray-900 mb-2\">{{ notice.title }}</h3>\r\n                <div class=\"flex items-center text-sm text-gray-500 mb-2\">\r\n                  <Calendar class=\"h-4 w-4 mr-1\" />\r\n                  <span>{{ notice.time }}</span>\r\n                  <User class=\"h-4 w-4 ml-4 mr-1\" />\r\n                  <span>{{ notice.author }}</span>\r\n                </div>\r\n                <div class=\"text-sm text-gray-600 line-clamp-2\">\r\n                  {{ getNoticePreview(notice.content) }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"ml-4 flex-shrink-0\">\r\n              <ChevronRight class=\"h-5 w-5 text-gray-400\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 公告分页控件 -->\r\n    <div class=\"border-t border-gray-200 px-6 py-4\">\r\n      <div class=\"flex items-center justify-between\">\r\n        <div class=\"text-sm text-gray-500\">\r\n          共 {{ allNotices.length }} 条公告，每页显示 {{ noticesPerPage }} 条\r\n        </div>\r\n        <nav class=\"flex items-center space-x-2\">\r\n          <button\r\n              @click=\"prevNoticePage\"\r\n              :disabled=\"currentNoticePage === 1\"\r\n              class=\"px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronLeft class=\"h-5 w-5\" />\r\n          </button>\r\n\r\n          <div class=\"flex space-x-1\">\r\n            <button\r\n                v-for=\"page in displayedNoticePageNumbers\"\r\n                :key=\"page\"\r\n                @click=\"goToNoticePage(page)\"\r\n                :class=\"[\r\n                'px-3 py-1 rounded-md',\r\n                currentNoticePage === page\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'text-gray-600 hover:bg-gray-100'\r\n              ]\"\r\n            >\r\n              {{ page }}\r\n            </button>\r\n          </div>\r\n\r\n          <button\r\n              @click=\"nextNoticePage\"\r\n              :disabled=\"currentNoticePage === totalNoticePages\"\r\n              class=\"px-3 py-1 rounded-md text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronRight class=\"h-5 w-5\" />\r\n          </button>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue';\r\nimport {\r\n  Calendar,\r\n  User,\r\n  ChevronRight,\r\n  ChevronLeft\r\n} from 'lucide-vue-next';\r\n\r\n// 所有公告数据\r\nconst allNotices = [\r\n  // 这里可以复制 TaxCenter.vue 中的 allNotices 数据\r\n  {\r\n    id: 5,\r\n    title: '关于优化纳税服务流程的实施方案',\r\n    time: '2025-04-20',\r\n    author: '纳税服务司',\r\n    read: false,\r\n    content: `<p>为进一步优化纳税服务流程，提升纳税人满意度，现制定本实施方案。</p>\r\n              <h4>一、指导思想</h4>\r\n              <p>以纳税人需求为导向，以数字化转型为驱动，全面优化纳税服务流程。</p>\r\n              <h4>二、主要措施</h4>\r\n              <p>1. 简化办税流程</p>\r\n              <p>2. 推广网上办税</p>\r\n              <p>3. 优化服务渠道</p>`,\r\n    attachments: []\r\n  },\r\n  {\r\n    id: 6,\r\n    title: '税务系统网络安全管理规定',\r\n    time: '2025-04-18',\r\n    author: '信息中心',\r\n    read: false,\r\n    content: `<p>为加强税务系统网络安全管理，保障信息系统安全稳定运行，特制定本规定。</p>\r\n              <h4>一、总则</h4>\r\n              <p>本规定适用于全国税务系统各级单位的网络安全管理工作。</p>\r\n              <h4>二、安全要求</h4>\r\n              <p>1. 建立健全网络安全管理制度</p>\r\n              <p>2. 加强网络安全技术防护</p>\r\n              <p>3. 定期开展安全检查和评估</p>`,\r\n    attachments: [\r\n      { name: '网络安全管理规定.pdf', url: '#', size: '2.5MB' }\r\n    ]\r\n  }\r\n];\r\n\r\n// 公告分页\r\nconst currentNoticePage = ref(1);\r\nconst noticesPerPage = 20;\r\n\r\nconst totalNoticePages = computed(() => {\r\n  return Math.ceil(allNotices.length / noticesPerPage);\r\n});\r\n\r\nconst paginatedNotices = computed(() => {\r\n  const startIndex = (currentNoticePage.value - 1) * noticesPerPage;\r\n  return allNotices.slice(startIndex, startIndex + noticesPerPage);\r\n});\r\n\r\nconst displayedNoticePageNumbers = computed(() => {\r\n  const maxVisiblePages = 5;\r\n  let startPage = Math.max(1, currentNoticePage.value - Math.floor(maxVisiblePages / 2));\r\n  let endPage = Math.min(totalNoticePages.value, startPage + maxVisiblePages - 1);\r\n\r\n  if (endPage - startPage + 1 < maxVisiblePages) {\r\n    startPage = Math.max(1, endPage - maxVisiblePages + 1);\r\n  }\r\n\r\n  const pages = [];\r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  return pages;\r\n});\r\n\r\nconst prevNoticePage = () => {\r\n  if (currentNoticePage.value > 1) {\r\n    currentNoticePage.value--;\r\n  }\r\n};\r\n\r\nconst nextNoticePage = () => {\r\n  if (currentNoticePage.value < totalNoticePages.value) {\r\n    currentNoticePage.value++;\r\n  }\r\n};\r\n\r\nconst goToNoticePage = (page) => {\r\n  currentNoticePage.value = page;\r\n};\r\n\r\n// 打开公告详情\r\nconst openNoticeDetail = (notice) => {\r\n  // 这里可以复用 TaxCenter.vue 中的 openNoticeDetail 逻辑\r\n  console.log('Open notice detail:', notice);\r\n};\r\n\r\n// 获取公告预览文本\r\nconst getNoticePreview = (content) => {\r\n  // 移除HTML标签并截取前100个字符\r\n  const text = content.replace(/<[^>]*>/g, '').replace(/&[^;]+;/g, ' ');\r\n  return text.length > 100 ? text.substring(0, 100) + '...' : text;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.prose p {\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.line-clamp-2 {\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n</style>"],"mappings":";AAoFA,SAASA,GAAG,EAAEC,QAAQ,QAAQ,KAAK;AACnC,SACEC,QAAQ,EACRC,IAAI,EACJC,YAAY,EACZC,WAAW,QACN,iBAAiB;;AAExB;AAuCA,MAAMC,cAAc,GAAG,EAAE;;;;;;;IAtCzB,MAAMC,UAAU,GAAG;IACjB;IACA;MACEC,EAAE,EAAE,CAAC;MACLC,KAAK,EAAE,iBAAiB;MACxBC,IAAI,EAAE,YAAY;MAClBC,MAAM,EAAE,OAAO;MACfC,IAAI,EAAE,KAAK;MACXC,OAAO,EAAE;AACb;AACA;AACA;AACA;AACA;AACA,+BAA+B;MAC3BC,WAAW,EAAE;IACf,CAAC,EACD;MACEN,EAAE,EAAE,CAAC;MACLC,KAAK,EAAE,cAAc;MACrBC,IAAI,EAAE,YAAY;MAClBC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAE,KAAK;MACXC,OAAO,EAAE;AACb;AACA;AACA;AACA;AACA;AACA,oCAAoC;MAChCC,WAAW,EAAE,CACX;QAAEC,IAAI,EAAE,cAAc;QAAEC,GAAG,EAAE,GAAG;QAAEC,IAAI,EAAE;MAAQ,CAAC;IAErD,CAAC,CACF;;IAED;IACA,MAAMC,iBAAiB,GAAGlB,GAAG,CAAC,CAAC,CAAC;IAGhC,MAAMmB,gBAAgB,GAAGlB,QAAQ,CAAC,MAAM;MACtC,OAAOmB,IAAI,CAACC,IAAI,CAACd,UAAU,CAACe,MAAM,GAAGhB,cAAc,CAAC;IACtD,CAAC,CAAC;IAEF,MAAMiB,gBAAgB,GAAGtB,QAAQ,CAAC,MAAM;MACtC,MAAMuB,UAAU,GAAG,CAACN,iBAAiB,CAACO,KAAK,GAAG,CAAC,IAAInB,cAAc;MACjE,OAAOC,UAAU,CAACmB,KAAK,CAACF,UAAU,EAAEA,UAAU,GAAGlB,cAAc,CAAC;IAClE,CAAC,CAAC;IAEF,MAAMqB,0BAA0B,GAAG1B,QAAQ,CAAC,MAAM;MAChD,MAAM2B,eAAe,GAAG,CAAC;MACzB,IAAIC,SAAS,GAAGT,IAAI,CAACU,GAAG,CAAC,CAAC,EAAEZ,iBAAiB,CAACO,KAAK,GAAGL,IAAI,CAACW,KAAK,CAACH,eAAe,GAAG,CAAC,CAAC,CAAC;MACtF,IAAII,OAAO,GAAGZ,IAAI,CAACa,GAAG,CAACd,gBAAgB,CAACM,KAAK,EAAEI,SAAS,GAAGD,eAAe,GAAG,CAAC,CAAC;MAE/E,IAAII,OAAO,GAAGH,SAAS,GAAG,CAAC,GAAGD,eAAe,EAAE;QAC7CC,SAAS,GAAGT,IAAI,CAACU,GAAG,CAAC,CAAC,EAAEE,OAAO,GAAGJ,eAAe,GAAG,CAAC,CAAC;MACxD;MAEA,MAAMM,KAAK,GAAG,EAAE;MAChB,KAAK,IAAIC,CAAC,GAAGN,SAAS,EAAEM,CAAC,IAAIH,OAAO,EAAEG,CAAC,EAAE,EAAE;QACzCD,KAAK,CAACE,IAAI,CAACD,CAAC,CAAC;MACf;MAEA,OAAOD,KAAK;IACd,CAAC,CAAC;IAEF,MAAMG,cAAc,GAAGA,CAAA,KAAM;MAC3B,IAAInB,iBAAiB,CAACO,KAAK,GAAG,CAAC,EAAE;QAC/BP,iBAAiB,CAACO,KAAK,EAAE;MAC3B;IACF,CAAC;IAED,MAAMa,cAAc,GAAGA,CAAA,KAAM;MAC3B,IAAIpB,iBAAiB,CAACO,KAAK,GAAGN,gBAAgB,CAACM,KAAK,EAAE;QACpDP,iBAAiB,CAACO,KAAK,EAAE;MAC3B;IACF,CAAC;IAED,MAAMc,cAAc,GAAIC,IAAI,IAAK;MAC/BtB,iBAAiB,CAACO,KAAK,GAAGe,IAAI;IAChC,CAAC;;IAED;IACA,MAAMC,gBAAgB,GAAIC,MAAM,IAAK;MACnC;MACAC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEF,MAAM,CAAC;IAC5C,CAAC;;IAED;IACA,MAAMG,gBAAgB,GAAIhC,OAAO,IAAK;MACpC;MACA,MAAMiC,IAAI,GAAGjC,OAAO,CAACkC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC;MACrE,OAAOD,IAAI,CAACxB,MAAM,GAAG,GAAG,GAAGwB,IAAI,CAACE,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,KAAK,GAAGF,IAAI;IAClE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}